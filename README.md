# Ветеринарная клиника

Система управления ветеринарной клиникой с админ-панелью.

## Структура проекта

Проект построен по архитектуре MVC и включает:
- `controllers/` - логика обработки запросов
- `models/` - модели данных и доступ к БД
- `views/` - шаблоны страниц Pug
- `routes/` - маршрутизация
- `middlewares/` - промежуточное ПО
- `migrations/` - миграции базы данных
- `seeders/` - начальные данные
- `services/` - сервисные функции
- `utils/` - утилиты
- `public/` - статические файлы
- `config/` - конфигурация

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd veterinary_clinic
```

2. Установите зависимости:
```bash
cd app
npm install
```

3. Настройте базу данных PostgreSQL.

## Настройка

Создайте файл `.env` в директории `app` со следующими переменными:
```
NODE_ENV=development
PORT=4000
DB_HOST=localhost
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_NAME=veterinary_clinic
JWT_SECRET=your-jwt-secret-key
LOG_API_REQUESTS=true
```

## Миграция базы данных

Выполните миграции для создания структуры базы данных:
```bash
cd app
npx knex migrate:latest
```

Заполните базу начальными данными:
```bash
npx knex seed:run
```

## Запуск

Запустите сервер разработки:
```bash
cd app
npm run dev
```

Или запустите в производственном режиме:
```bash
cd app
npm start
```

## Роли пользователей

Система поддерживает следующие роли:
- **Admin** - полный доступ ко всем функциям системы
- **Vet** - доступ к управлению приемами и медицинским записям
- **Client** - доступ к функциям записи на прием и управления питомцами
- **Manager** - управление расписанием и клиентами

## Функциональность

### Админ-панель
- Управление пользователями (добавление, блокировка, изменение)
- Управление ветеринарами (расписание, специализация)
- Управление клиентами и их питомцами
- Управление приемами (просмотр, изменение, отмена)
- Настройки системы (название клиники, контакты, логотип)
- Статистика и аналитика (загруженность, популярные услуги)

### Ветеринары
- Просмотр своего расписания
- Управление приемами (подтверждение, завершение)
- История пациентов и их медицинские записи
- Внесение диагноза и рекомендаций

### Клиенты
- Запись на прием онлайн
- История посещений и статус приемов
- Управление своими питомцами (добавление, изменение)
- Просмотр медицинских записей питомцев и рекомендаций

## API

Система предоставляет REST API для:
- Управления ветеринарами (`/api/vets`)
- Управления питомцами (`/api/pets`)
- Управления приемами (`/api/appointments`)
- Получения статистики (`/api/admin/dashboard`)
- Настройки системы (`/api/admin/settings`)

## Технологии

### Бэкенд
- Node.js
- Express.js
- Knex.js (SQL Query Builder)
- PostgreSQL
- JWT аутентификация
- Pug (шаблонизатор)

### Фронтенд
- HTML5
- CSS3
- JavaScript (ES6+)
- Bootstrap 5

### Инструменты
- Morgan (логирование)
- Winston (расширенное логирование)
- dotenv (переменные окружения)
- cookie-parser
- cors